/**
 * Scrolling System Styles
 * 
 * Core CSS for the scroll-snap container and section behavior.
 * This file should be imported after Tailwind base styles.
 */

/* Remove scroll snap from html and body - should only be on scroll container */
html {
  scroll-behavior: smooth;
  background-color: #ffffff;
}

html.dark {
  background-color: #262626; /* neutral-800 */
}

body {
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto",
    "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  background-color: #ffffff;
}

body.dark,
html.dark body {
  background-color: #262626;
}

/* Main scroll container - implement best practices for scroll snap */
.scroll-snap-container {
  scroll-snap-type: y mandatory;
  scroll-behavior: smooth;
  overscroll-behavior-y: contain;
  scroll-padding-top: 0;
  overflow-y: auto;
  overflow-x: hidden;
  height: 100vh;
  width: 100%;
  position: relative;
}

/* Disable scroll-snap on mobile for better UX */
@media (max-width: 768px) {
  .scroll-snap-container {
    scroll-snap-type: none;
    scroll-behavior: auto;
    overscroll-behavior-y: auto;
  }
}

/* Section scroll snap points */
.scroll-snap-section {
  scroll-snap-align: start;
  scroll-snap-stop: normal;
  min-height: 100vh;
  width: 100%;
  position: relative;
  box-sizing: border-box;
  flex-shrink: 0;
  overflow: hidden;
  isolation: isolate;
  z-index: 1;
  contain: layout style paint;
}

/* Disable scroll-snap alignment on mobile */
@media (max-width: 768px) {
  .scroll-snap-section {
    scroll-snap-align: none;
    scroll-snap-stop: normal;
    min-height: auto;
    overflow: visible;
    contain: none;
  }
}

/* Special styling for the home/hero section */
.scroll-snap-section#home {
  z-index: 10;
  isolation: isolate;
  backface-visibility: hidden;
  transform: translateZ(0);
  padding: 0 !important;
  margin: 0 !important;
  width: 100vw;
  height: 100vh;
  min-height: 100vh;
  max-height: 100vh;
  overflow: hidden;
  position: relative;
  left: 0;
  top: 0;
}

/* Mobile viewport height fixes */
@media (max-width: 768px) {
  .scroll-snap-section#home {
    height: 100dvh;
    min-height: 100dvh;
    max-height: 100dvh;
  }

  @supports not (height: 100dvh) {
    .scroll-snap-section#home {
      height: 100vh;
      min-height: 100vh;
      max-height: 100vh;
    }
  }
}

/* Section progress indicator */
.scroll-progress {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(to right, #667eea, #764ba2);
  transform-origin: left;
  z-index: 1000;
}

/* Ensure viewport height accounts for browser chrome */
@supports (height: 100dvh) {
  .scroll-snap-container {
    height: 100dvh;
  }
}

/* Respect user preferences for reduced motion */
@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }

  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .scroll-snap-container {
    scroll-behavior: auto;
    scroll-snap-type: none;
  }

  .scroll-snap-section {
    scroll-snap-align: none;
    scroll-snap-stop: normal;
  }
}
